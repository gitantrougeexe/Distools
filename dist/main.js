!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";function s(e){return new Promise(t=>setTimeout(t,e))}n.d(t,"m",function(){return s}),n.d(t,"i",function(){return i}),n.d(t,"j",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"g",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return g}),n.d(t,"e",function(){return h}),n.d(t,"l",function(){return p}),n.d(t,"k",function(){return f}),n.d(t,"f",function(){return m});class r{static byProperties(e,t=(e=>e)){return n=>{const s=t(n);return!!s&&e.every(e=>void 0!==s[e])}}static getByProps(...e){return this.getModule(this.byProperties(e),!0)}static getModule(e,t=!0){const n=this.getAllModules(),s=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r],{exports:o}=i;let a=null;if(o&&(o.__esModule&&o.default&&e(o.default)&&(a=o.default),e(o)&&(a=o),a)){if(t)return a;s.push(a)}}return t||0==s.length?void 0:s}static getAllModules(){return this.require.c}static get require(){if(this._require)return this._require;const e="zl-webpackmodules",t="function"==typeof window.webpackJsonp?window.webpackJsonp([],{[e]:(e,t,n)=>t.default=n},[e]).default:window.webpackJsonp.push([[],{[e]:(e,t,n)=>e.exports=n},[[e]]]);return delete t.m[e],delete t.c[e],this._require=t}}const i=r.getByProps("createElement","cloneElement"),o=r.getByProps("render","findDOMNode"),a=r.getByProps("getAPIBaseURL"),l=r.getByProps("Permissions","ActivityTypes","StatusTypes"),d=r.getByProps("getCurrentUser"),c=r.getByProps("getToken"),u=r.getByProps("getMember"),g=r.getByProps("getChannels"),h=r.getByProps("getMessages"),p=r.getByProps("getLastSelectedGuildId"),f=r.getByProps("getLastSelectedChannelId"),m=r.getByProps("receiveMessage","sendBotMessage")},function(e,t,n){"use strict";var s=n(0);t.a={async searchSharedFriends(e){var t=this.members,n=[];for(var r of t){if(!r.relationships){var i=await s.a.get(s.c.Endpoints.USER_RELATIONSHIPS(r.userId));r.relationships=JSON.parse(i.text)}r.relationships.length&&n.push(r)}if(e){var o=[];for(var r of n)r.relationships.find(t=>t.id===e)&&o.push(r);n=o}return n},searchOwnGuildMessages(e,t=this.userId,n=0){return new Promise((r,i)=>{s.a.get(`${s.c.Endpoints.SEARCH_GUILD(e)}?author_id=${t}&include_nsfw=true&offset=${n}`).then(e=>r(e.body)).catch(i)})},searchOwnChannelMessages(e,t=this.userId,n=0){return new Promise((r,i)=>{s.a.get(`${s.c.Endpoints.SEARCH_CHANNEL(e)}?author_id=${t}&offset=${n}`).then(e=>r(e.body)).catch(i)})},async deleteOwnGuildMessages(){var e=this.selectedGuildId,t=await this.searchOwnGuildMessages(e),n=0;if(t)if(t.total_results>0){this.progressBar.setSteps(t.total_results);do{for(var r of(console.log(`${t.total_results} remaining messages.`),await Object(s.m)(200),t.messages)){for(var i of r)i.hit&&!i.call&&(await this.deleteMessage(i.channel_id,i.id),await Object(s.m)(200),n++);this.progressBar.setProgress(n)}}while((t=await this.searchOwnGuildMessages(e))&&t.total_results>0);console.log("Done."),await Object(s.m)(2e3),this.progressBar.setProgress(0)}else console.log("No message to delete.");else console.log("Index is not ready, try again.")},async deleteOwnChannelMessages(){var e=this.selectedChannelId,t=await this.searchOwnChannelMessages(e),n=0;if(t)if(t.total_results>0){this.progressBar.setSteps(t.total_results);do{for(var r of(console.log(`${t.total_results} remaining messages.`),await Object(s.m)(200),t.messages)){for(var i of r)i.hit&&!i.call&&(await this.deleteMessage(e,i.id),await Object(s.m)(200),n++);this.progressBar.setProgress(n)}}while((t=await this.searchOwnChannelMessages(e))&&t.messages.length>0);console.log("Done."),await Object(s.m)(2e3),this.progressBar.setProgress(0)}else console.log("No message to delete.");else console.log("Index is not ready, try again.")},async fetchAllMessages(e=this.selectedChannelId){var t=this.messages.reverse(),n=[];do{n.push(...t),t=(await s.a.get({url:s.c.Endpoints.MESSAGES(e),query:{before:t[t.length-1].id,limit:100}})).body}while(t.length>0);return n.reverse()},async saveMessages(){var e,t,n=this.members,s=await this.fetchAllMessages(),r=[],i=[];for(t of s)i.push({id:t.id,author:t.author.id,content:t.content,timestamp:t.timestamp});for(e of(n.push(this.user),n))r.push({id:e.id,username:e.username,discriminator:e.discriminator,avatar:e.avatar});this.downloadTextFile(`${s[0].channel_id}.json`,JSON.stringify({members:r,conversation:i},null,2))},downloadTextFile(e,t){var n=window.URL.createObjectURL(new Blob([t],{type:"octet/stream"})),s=document.createElement("a");s.href=n,s.download=e,s.style.display="none",document.body.prepend(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)},deleteMessage:(e,t)=>new Promise((n,r)=>{s.a.delete(`${s.c.Endpoints.MESSAGES(e)}/${t}`).then(e=>n(e.body)).catch(r)}),get receiveMessages(){return s.f},get members(){return this.selectedGuildId?s.d.getMembers(this.selectedGuildId):this.selectedChannel._getUsers()},get selectedGuildId(){return s.l.getGuildId()},get selectedChannelId(){return s.k.getChannelId()},get selectedChannel(){return s.b.getChannel(this.selectedChannelId)},get messages(){return s.e.getMessages(this.selectedChannelId).toArray()},get user(){return console.log(s.h),s.h.getCurrentUser()},get token(){return s.g.getToken()},_test(){var e=document.createElement("style");e.innerHTML=".video-8eMOth, .imageWrapper-2p5ogY > img { transition: filter ease-in-out .25s; filter: blur(0.6rem); }\n.video-8eMOth:hover, .imageWrapper-2p5ogY > img:hover { filter: unset; }",document.head.append(e)}}},function(e,t,n){"use strict";var s=n(0),r=n(1),i=class extends s.i.Component{constructor(e){super(e),this.node=s.i.createRef()}componentDidUpdate(){this.node.current&&window.requestAnimationFrame(()=>{var e=this.node.current.style;e.transform="translate(-50%, -50%) scale(1)",e.opacity="1"})}render(){return this.props.hide?null:s.i.createElement("div",{class:"modal",style:{opacity:0},ref:this.node},s.i.createElement("form",{class:"settings"},s.i.createElement("label",null,s.i.createElement("input",{type:"radio",value:"guild",checked:"true"}),"Current Guild"),s.i.createElement("label",null,s.i.createElement("input",{type:"radio",value:"channel"}),"Current Channel")))}},o=class extends s.i.Component{constructor(e){super(e),this.progressBar=s.i.createRef(),this.steps=100}setSteps(e){this.steps=e}setProgress(e){this.progressBar.current.style.width=`${e/this.steps*100}%`}render(){return s.i.createElement("div",{class:"progress-bar"},s.i.createElement("div",{class:"progress",ref:this.progressBar}))}};t.a=class extends s.i.Component{constructor(e){super(e),this.state={hideSettings:!0},this.progressBar=s.i.createRef()}componentDidMount(){r.a.progressBar=this.progressBar.current}render(){return s.i.createElement(s.i.Fragment,null,s.i.createElement("style",null,"#distools * {\n    box-sizing: border-box;\n}\n\n#distools .right {\n    margin-left: auto;\n}\n\n#distools>nav {\n    background-color: #191818;\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    display: flex;\n    height: 48px;\n    width: 100%;\n    padding: 0 4.5rem;\n    font-size: 0.85rem;\n    color: #fff;\n}\n\n#distools>nav>* {\n    display: flex;\n    align-items: center;\n}\n\n#distools>nav>.title {\n    margin-right: 1.5rem;\n    font-weight: bold;\n}\n\n#distools>nav>ul>li {\n    transition: background-color ease-in-out .2s;\n    display: flex;\n    align-items: center;\n    height: 100%;\n    padding: 0 1rem;\n    cursor: pointer;\n}\n\n#distools>nav>ul>li:hover {\n    background-color: #000;\n}\n\n/* PROGRESS BAR */\n.progress-bar {\n    background-color: #36393f;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 2px;\n}\n\n.progress {\n    transition: width ease-in-out .8s;\n    background-color: #2e70f3;\n    width: 0;\n    height: 2px;\n}\n\n/* MODAL */\n.modal {\n    transition: ease-in-out .25s;\n    transition-property: transform, opacity;\n    transform: translate(-50%, -50%) scale(0.8);\n    opacity: 0;\n    background-color: #191818;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    width: 500px;\n    height: 500px;\n    z-index: 1;\n    color: #fff;\n}"),s.i.createElement(i,{hide:this.state.hideSettings}),s.i.createElement("nav",null,s.i.createElement(o,{ref:this.progressBar}),s.i.createElement("div",{class:"title"},"DISTOOLS"),s.i.createElement("ul",null,s.i.createElement("li",{onClick:()=>r.a.deleteOwnGuildMessages()},"üóëÔ∏è Delete guild messages"),s.i.createElement("li",{onClick:()=>r.a.deleteOwnChannelMessages()},"üóëÔ∏è Delete channel messages"),s.i.createElement("li",null,"üíæ Save messages")),s.i.createElement("ul",{class:"right"},s.i.createElement("li",{onClick:()=>this.setState({hideSettings:!this.state.hideSettings})},"‚öôÔ∏è Settings"))))}}},function(e,t,n){"use strict";n.r(t),function(e){var t=n(0),s=n(1),r=n(2);document.getElementById("app-mount").style.height="calc(100vh - 48px)";var i=document.getElementById("distools");i&&i.remove(),(i=document.createElement("div")).id="distools",t.j.render(t.i.createElement(r.a,null),i),document.body.prepend(i),e.DISTOOLS=s.a}.call(this,n(4))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]);