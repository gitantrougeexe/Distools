!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";function n(e){return new Promise(t=>setTimeout(t,e))}r.d(t,"l",function(){return n}),r.d(t,"h",function(){return o}),r.d(t,"i",function(){return i}),r.d(t,"a",function(){return a}),r.d(t,"b",function(){return l}),r.d(t,"g",function(){return u}),r.d(t,"f",function(){return c}),r.d(t,"c",function(){return d}),r.d(t,"d",function(){return g}),r.d(t,"k",function(){return h}),r.d(t,"j",function(){return p}),r.d(t,"e",function(){return f});class s{static byProperties(e,t=(e=>e)){return r=>{const n=t(r);return!!n&&e.every(e=>void 0!==n[e])}}static getByProps(...e){return this.getModule(this.byProperties(e),!0)}static getModule(e,t=!0){const r=this.getAllModules(),n=[];for(const s in r){if(!r.hasOwnProperty(s))continue;const o=r[s],{exports:i}=o;let a=null;if(i&&(i.__esModule&&i.default&&e(i.default)&&(a=i.default),e(i)&&(a=i),a)){if(t)return a;n.push(a)}}return t||0==n.length?void 0:n}static getAllModules(){return this.require.c}static get require(){if(this._require)return this._require;const e="zl-webpackmodules",t="function"==typeof window.webpackJsonp?window.webpackJsonp([],{[e]:(e,t,r)=>t.default=r},[e]).default:window.webpackJsonp.push([[],{[e]:(e,t,r)=>e.exports=r},[[e]]]);return delete t.m[e],delete t.c[e],this._require=t}}const o=s.getByProps("createElement","cloneElement"),i=s.getByProps("render","findDOMNode"),a=s.getByProps("getAPIBaseURL"),l=s.getByProps("Permissions","ActivityTypes","StatusTypes"),u=s.getByProps("getCurrentUser"),c=s.getByProps("getToken"),d=s.getByProps("getMember"),g=(s.getByProps("getChannels"),s.getByProps("getMessages")),h=s.getByProps("getLastSelectedGuildId"),p=s.getByProps("getLastSelectedChannelId"),f=s.getByProps("receiveMessage","sendBotMessage")},function(e,t,r){"use strict";var n=r(0);t.a={async searchSharedFriends(e){var t=this.members,r=[];for(var s of t){if(!s.relationships){var o=await n.a.get(n.b.Endpoints.USER_RELATIONSHIPS(s.userId));s.relationships=JSON.parse(o.text)}s.relationships.length&&r.push(s)}if(e){var i=[];for(var s of r)s.relationships.find(t=>t.id===e)&&i.push(s);r=i}return r},searchOwnGuildMessages(e,t=this.userId,r=0){return new Promise((s,o)=>{n.a.get(`${n.b.Endpoints.SEARCH_GUILD(e)}?author_id=${t}&include_nsfw=true&offset=${r}`).then(e=>s(e.body)).catch(o)})},searchOwnChannelMessages(e,t=this.userId,r=0){return new Promise((s,o)=>{n.a.get(`${n.b.Endpoints.SEARCH_CHANNEL(e)}?author_id=${t}&offset=${r}`).then(e=>s(e.body)).catch(o)})},async deleteOwnGuildMessages(){var e=this.selectedGuildId,t=await this.searchOwnGuildMessages(e),r=0;if(t)if(t.total_results>0){this.progressBar.setSteps(t.total_results);do{for(var s of(console.log(`${t.total_results} remaining messages.`),await Object(n.l)(200),t.messages)){for(var o of s)o.hit&&!o.call&&(await this.deleteMessage(o.channel_id,o.id),await Object(n.l)(200),r++);this.progressBar.setProgress(r)}}while((t=await this.searchOwnGuildMessages(e))&&t.total_results>0);console.log("Done."),await Object(n.l)(2e3),this.progressBar.setProgress(0)}else console.log("No message to delete.");else console.log("Index is not ready, try again.")},async deleteOwnChannelMessages(){var e=this.selectedChannelId,t=await this.searchOwnChannelMessages(e),r=0;if(t)if(t.total_results>0){this.progressBar.setSteps(t.total_results);do{for(var s of(console.log(`${t.total_results} remaining messages.`),await Object(n.l)(200),t.messages)){for(var o of s)o.hit&&!o.call&&(await this.deleteMessage(e,o.id),await Object(n.l)(200),r++);this.progressBar.setProgress(r)}}while((t=await this.searchOwnChannelMessages(e))&&t.messages.length>0);console.log("Done."),await Object(n.l)(2e3),this.progressBar.setProgress(0)}else console.log("No message to delete.");else console.log("Index is not ready, try again.")},deleteMessage:(e,t)=>new Promise((r,s)=>{n.a.delete(`${n.b.Endpoints.MESSAGES(e)}/${t}`).then(e=>r(e.body)).catch(s)}),get receiveMessages(){return n.e},get members(){return n.c.getMembers(this.selectedGuildId)},get selectedGuildId(){return n.k.getGuildId()},get selectedChannelId(){return n.j.getChannelId()},get messages(){return n.d.getMessages(this.selectedChannelId).toArray()},get userId(){return n.g.getCurrentUser().id},get token(){return n.f.getToken()}}},function(e,t,r){"use strict";var n=r(0),s=r(1),o=class extends n.h.Component{handleOptionChange(e){this.setState({selectedOption:e.target.value})}render(){return n.h.createElement("div",{class:"modal"},n.h.createElement("form",{class:"settings"},n.h.createElement("label",null,n.h.createElement("input",{type:"radio",value:"guild",checked:!0}),"Current Guild"),n.h.createElement("label",null,n.h.createElement("input",{type:"radio",value:"channel"}),"Current Channel")))}},i=class extends n.h.Component{constructor(e){super(e),this.progressBar=n.h.createRef(),this.steps=100}setSteps(e){this.steps=e}setProgress(e){this.progressBar.current.style.width=`${e/this.steps*100}%`}render(){return n.h.createElement("div",{class:"progress-bar"},n.h.createElement("div",{class:"progress",ref:this.progressBar}))}};t.a=class extends n.h.Component{constructor(e){super(e),this.progressBar=n.h.createRef()}componentDidMount(){s.a.progressBar=this.progressBar.current}render(){return n.h.createElement(n.h.Fragment,null,n.h.createElement("style",null,"#distools * {\r\n    box-sizing: border-box;\r\n}\r\n\r\n#distools .right {\r\n    margin-left: auto;\r\n}\r\n\r\n#distools>nav {\r\n    background-color: #191818;\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    display: flex;\r\n    height: 48px;\r\n    width: 100%;\r\n    padding: 0 4.5rem;\r\n    font-size: 0.85rem;\r\n    color: #fff;\r\n}\r\n\r\n#distools>nav>* {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n#distools>nav>.title {\r\n    margin-right: 1.5rem;\r\n    font-weight: bold;\r\n}\r\n\r\n#distools>nav>ul>li {\r\n    transition: background-color ease-in-out .2s;\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    padding: 0 1rem;\r\n    cursor: pointer;\r\n}\r\n\r\n#distools>nav>ul>li:hover {\r\n    background-color: #000;\r\n}\r\n\r\n/* PROGRESS BAR */\r\n.progress-bar {\r\n    background-color: #36393f;\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 2px;\r\n}\r\n\r\n.progress {\r\n    transition: width ease-in-out .8s;\r\n    background-color: #2e70f3;\r\n    width: 0;\r\n    height: 2px;\r\n}\r\n\r\n/* MODAL */\r\n.modal {\r\n    background-color: #191818;\r\n    transform: translate(-50%, -50%);\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    width: 500px;\r\n    height: 500px;\r\n    z-index: 1;\r\n    color: #fff;\r\n}"),n.h.createElement(o,null),n.h.createElement("nav",null,n.h.createElement(i,{ref:this.progressBar}),n.h.createElement("div",{class:"title"},"DISTOOLS"),n.h.createElement("ul",null,n.h.createElement("li",{onClick:()=>s.a.deleteOwnGuildMessages()},"🗑️ Delete guild messages"),n.h.createElement("li",{onClick:()=>s.a.deleteOwnChannelMessages()},"🗑️ Delete channel messages"),n.h.createElement("li",null,"💾 Save messages")),n.h.createElement("ul",{class:"right"},n.h.createElement("li",null,"⚙️ Settings"))))}}},function(e,t,r){"use strict";r.r(t),function(e){var t=r(0),n=r(1),s=r(2);document.getElementById("app-mount").style.height="calc(100vh - 48px)";var o=document.getElementById("distools");o&&o.remove(),(o=document.createElement("div")).id="distools",t.i.render(t.h.createElement(s.a,null),o),document.body.prepend(o),e.DISTOOLS=n.a}.call(this,r(4))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r}]);